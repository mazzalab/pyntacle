

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>pyntacle.pyntacle &mdash; pyntacle  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="pyntacle  documentation" href="../../index.html"/>
        <link rel="up" title="Module code" href="../index.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> pyntacle
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../pyntacle.html">pyntacle package</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">pyntacle</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Module code</a> &raquo;</li>
        
      <li>pyntacle.pyntacle</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for pyntacle.pyntacle</h1><div class="highlight"><pre>
<span></span><span class="c1"># todo list of todos:</span>
<span class="c1"># todo import bruteforce algorithm in keyplayer</span>
<span class="c1"># todo rivedi nomi metodi</span>
<span class="c1"># todo implementa brute-force algorithm (Daniele) nella main + un wrapper (sempre daniele)</span>

<span class="c1"># !/usr/bin/env python3.6</span>

<span class="n">__author__</span> <span class="o">=</span> <span class="s2">&quot;Daniele Capocefalo, Mauro Truglio, Tommaso Mazza&quot;</span>
<span class="n">__copyright__</span> <span class="o">=</span> <span class="s2">&quot;Copyright 2018, The pyntacle Project&quot;</span>
<span class="n">__credits__</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Ferenc Jordan&quot;</span><span class="p">]</span>
<span class="n">__version__</span> <span class="o">=</span> <span class="s2">&quot;0.0.1&quot;</span>
<span class="n">__maintainer__</span> <span class="o">=</span> <span class="s2">&quot;Daniele Capocefalo&quot;</span>
<span class="n">__email__</span> <span class="o">=</span> <span class="s2">&quot;d.capocefalo@css-mendel.it&quot;</span>
<span class="n">__status__</span> <span class="o">=</span> <span class="s2">&quot;Development&quot;</span>
<span class="n">__date__</span> <span class="o">=</span> <span class="s2">&quot;27 October 2016&quot;</span>
<span class="n">__license__</span> <span class="o">=</span> <span class="sa">u</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">  Copyright (C) 20016-2017  Tommaso Mazza &lt;t,mazza@css-mendel.it&gt;</span>
<span class="s2">  Viale Regina Margherita 261, 00198 Rome, Italy</span>

<span class="s2">  This program is free software; you can use and redistribute it under</span>
<span class="s2">  the terms of the BY-NC-ND license as published by</span>
<span class="s2">  Creative Commons; either version 4 of the License, or</span>
<span class="s2">  (at your option) any later version.</span>

<span class="s2">  This program is distributed in the hope that it will be useful,</span>
<span class="s2">  but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="s2">  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="s2">  License for more details.</span>

<span class="s2">  You should have received a copy of the license along with this</span>
<span class="s2">  work. If not, see http://creativecommons.org/licenses/by-nc-nd/4.0/.</span>
<span class="s2">  &quot;&quot;&quot;</span>


<span class="c1"># external libraries</span>
<span class="kn">import</span> <span class="nn">argparse</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="kn">from</span> <span class="nn">exceptions.generic_error</span> <span class="k">import</span> <span class="n">Error</span>



<span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">):</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="s1">&#39;Python &lt; 3.4 is not supported. Please use &quot;python3&quot; instead or update your python version.&#39;</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">colorama</span> <span class="k">import</span> <span class="n">Fore</span><span class="p">,</span> <span class="n">Style</span><span class="p">,</span> <span class="n">init</span>

<span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;nt&quot;</span><span class="p">:</span>
    <span class="n">init</span><span class="p">(</span><span class="n">convert</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">report.reporter</span> <span class="k">import</span> <span class="o">*</span>
<span class="c1"># Main commands wrappers</span>
<span class="kn">from</span> <span class="nn">commands.keyplayer</span> <span class="k">import</span> <span class="n">KeyPlayer</span> <span class="k">as</span> <span class="n">kp_command</span>
<span class="kn">from</span> <span class="nn">commands.metrics</span> <span class="k">import</span> <span class="n">Metrics</span> <span class="k">as</span> <span class="n">metrics_command</span>
<span class="kn">from</span> <span class="nn">commands.convert</span> <span class="k">import</span> <span class="n">Convert</span> <span class="k">as</span> <span class="n">convert_command</span>
<span class="kn">from</span> <span class="nn">commands.generate</span> <span class="k">import</span> <span class="n">Generate</span> <span class="k">as</span> <span class="n">generate_command</span>
<span class="kn">from</span> <span class="nn">commands.set</span> <span class="k">import</span> <span class="n">Set</span> <span class="k">as</span> <span class="n">set_command</span>
<span class="kn">from</span> <span class="nn">commands.communities</span> <span class="k">import</span> <span class="n">Communities</span> <span class="k">as</span> <span class="n">communities_command</span>
<span class="kn">from</span> <span class="nn">config</span> <span class="k">import</span> <span class="o">*</span>


<span class="k">def</span> <span class="nf">_check_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">action</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="c1"># converted value must be one of the choices (if specified)</span>
    <span class="k">if</span> <span class="n">action</span><span class="o">.</span><span class="n">choices</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">value</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">action</span><span class="o">.</span><span class="n">choices</span><span class="p">:</span>
        <span class="n">args</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="n">value</span><span class="p">,</span>
                <span class="s1">&#39;choices&#39;</span><span class="p">:</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">repr</span><span class="p">,</span> <span class="n">action</span><span class="o">.</span><span class="n">choices</span><span class="p">))}</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;invalid choice: </span><span class="si">%(value)r</span><span class="s1">&#39;</span>
        <span class="k">raise</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentError</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="n">msg</span> <span class="o">%</span> <span class="n">args</span><span class="p">)</span>


<span class="c1"># todo: Controlla che tutte le opzioni stiano effettivamente negli USAGE</span>

<div class="viewcode-block" id="App"><a class="viewcode-back" href="../../pyntacle.pyntacle.html#pyntacle.pyntacle.App">[docs]</a><span class="k">class</span> <span class="nc">App</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">tracebacklimit</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">verbosity</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="c1"># Overriding argparse&#39;s mischievous and buggy error message</span>
        <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="o">.</span><span class="n">_check_value</span> <span class="o">=</span> <span class="n">_check_value</span>

        <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Main description&quot;</span><span class="p">,</span>
            <span class="n">usage</span><span class="o">=</span><span class="n">Fore</span><span class="o">.</span><span class="n">RED</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">BRIGHT</span> <span class="o">+</span> <span class="s1">&#39;pyntacle.py&#39;</span> <span class="o">+</span> <span class="n">Fore</span><span class="o">.</span><span class="n">GREEN</span> <span class="o">+</span> <span class="s1">&#39; &lt;command&gt;&#39;</span> <span class="o">+</span> <span class="n">Fore</span><span class="o">.</span><span class="n">RED</span>
                  <span class="o">+</span> <span class="s1">&#39;&#39;&#39; [&lt;args&gt;]</span>

<span class="s1">The available commands in pyntacle are:</span><span class="se">\n</span><span class="s1">&#39;&#39;&#39;</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">RESET_ALL</span> <span class="o">+</span> <span class="mi">100</span> <span class="o">*</span> <span class="s1">&#39;-&#39;</span> <span class="o">+</span>
                  <span class="n">Fore</span><span class="o">.</span><span class="n">GREEN</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">  keyplayer       &#39;</span> <span class="o">+</span> <span class="n">Fore</span><span class="o">.</span><span class="n">CYAN</span> <span class="o">+</span> <span class="s1">&#39;Find Best Key-Player Set of size X or get Key-Player metrics from a set of nodes&#39;</span> <span class="o">+</span>
                  <span class="n">Fore</span><span class="o">.</span><span class="n">GREEN</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">  metrics         &#39;</span> <span class="o">+</span> <span class="n">Fore</span><span class="o">.</span><span class="n">CYAN</span> <span class="o">+</span> <span class="s1">&#39;Get global metrics for the input graph or local metrics for a set of nodes&#39;</span> <span class="o">+</span>
                  <span class="n">Fore</span><span class="o">.</span><span class="n">GREEN</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">  convert         &#39;</span> <span class="o">+</span> <span class="n">Fore</span><span class="o">.</span><span class="n">CYAN</span> <span class="o">+</span> <span class="s1">&#39;Convert one graph stored into a file into another graph&#39;</span> <span class="o">+</span>
                  <span class="n">Fore</span><span class="o">.</span><span class="n">GREEN</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">  set             &#39;</span> <span class="o">+</span> <span class="n">Fore</span><span class="o">.</span><span class="n">CYAN</span> <span class="o">+</span> <span class="s1">&#39;Perform set operation on two graphs&#39;</span> <span class="o">+</span>
                  <span class="n">Fore</span><span class="o">.</span><span class="n">GREEN</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">  generate        &#39;</span> <span class="o">+</span> <span class="n">Fore</span><span class="o">.</span><span class="n">CYAN</span> <span class="o">+</span> <span class="s1">&#39;Create a graph based on several topologies&#39;</span> <span class="o">+</span>
                  <span class="n">Fore</span><span class="o">.</span><span class="n">GREEN</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">  communities     &#39;</span> <span class="o">+</span> <span class="n">Fore</span><span class="o">.</span><span class="n">CYAN</span> <span class="o">+</span> <span class="s1">&#39;Find communities within a Graph using several modular decomposition algorithms</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>
                  <span class="n">Style</span><span class="o">.</span><span class="n">RESET_ALL</span> <span class="o">+</span> <span class="mi">100</span> <span class="o">*</span> <span class="s1">&#39;-&#39;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;command&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;subcommand to run&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-v&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;count&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;verbosity level. -vvv is the highest level&quot;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-V&#39;</span><span class="p">,</span> <span class="s2">&quot;--version&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;version&quot;</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="s2">&quot;pyntacle v0.1 (alpha)&quot;</span><span class="p">)</span>

        <span class="c1"># Detect verbosity</span>
        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">arg</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;-v&#39;</span><span class="p">,</span> <span class="s1">&#39;-vv&#39;</span><span class="p">,</span> <span class="s1">&#39;-vvv&#39;</span><span class="p">]:</span>
                <span class="n">verbosity</span> <span class="o">=</span> <span class="n">arg</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s1">&#39;v&#39;</span><span class="p">)</span>
        <span class="c1"># Logging levels setup</span>
        <span class="k">if</span> <span class="n">verbosity</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">WARN</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">verbosity</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">verbosity</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>

        <span class="c1"># Continue parsing of the first two arguments</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">2</span><span class="p">])</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">command</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Unrecognized command&#39;</span><span class="p">)</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">print_help</span><span class="p">()</span>
            <span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="c1"># Use dispatch pattern to invoke method with same name</span>
        <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">command</span><span class="p">)()</span>

<div class="viewcode-block" id="App.keyplayer"><a class="viewcode-back" href="../../pyntacle.pyntacle.html#pyntacle.pyntacle.App.keyplayer">[docs]</a>    <span class="k">def</span> <span class="nf">keyplayer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Key player calculator</span><span class="se">\n\n</span><span class="s1">Subcommands:</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="mi">90</span> <span class="o">*</span> <span class="s1">&#39;-&#39;</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>
                        <span class="s1">&#39;  kp-finder</span><span class="se">\t</span><span class="s1">        find the best kp set of given metrics using a greedy algorithm</span><span class="se">\n</span><span class="s1">&#39;</span>
                        <span class="s1">&#39;  kp-info</span><span class="se">\t</span><span class="s1">        find kp metrics for user defined set of nodes</span><span class="se">\n\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="mi">90</span> <span class="o">*</span> <span class="s1">&#39;-&#39;</span><span class="p">,</span>
            <span class="n">formatter_class</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">RawDescriptionHelpFormatter</span><span class="p">,</span>
            <span class="n">usage</span><span class="o">=</span><span class="n">Fore</span><span class="o">.</span><span class="n">RED</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">BRIGHT</span> <span class="o">+</span> <span class="s1">&#39;pyntacle.py keyplayer&#39;</span>
                  <span class="o">+</span> <span class="n">Fore</span><span class="o">.</span><span class="n">GREEN</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">BRIGHT</span> <span class="o">+</span> <span class="s1">&#39; {kp-finder, kp-info}&#39;</span> <span class="o">+</span> <span class="n">Fore</span><span class="o">.</span><span class="n">RED</span>
                  <span class="o">+</span> <span class="s1">&#39; [arguments]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">RESET_ALL</span><span class="p">)</span>

        <span class="c1"># NOT prefixing the argument with -- means it&#39;s not optional</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-i&#39;</span><span class="p">,</span> <span class="s1">&#39;--input_file&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;input file in the form of adjacency matrix, edge list, Simple Interaction format (.sif), Binary file and simple dot file.&quot;</span><span class="p">)</span>  <span class="c1"># todo Explain available extensions</span>

        <span class="c1"># These are options instead</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-f&#39;</span><span class="p">,</span> <span class="s1">&#39;--format&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                            <span class="n">choices</span><span class="o">=</span><span class="n">format_dictionary</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Input format. </span><span class="se">\&#39;</span><span class="s2">adjmat</span><span class="se">\&#39;</span><span class="s2"> for adjacency matrix, </span><span class="se">\&#39;</span><span class="s2">edgelist</span><span class="se">\&#39;</span><span class="s2"> for edge list, </span><span class="se">\&#39;</span><span class="s2">sif</span><span class="se">\&#39;</span><span class="s2"> for Simple Interaction format, </span><span class="se">\&#39;</span><span class="s2">dot</span><span class="se">\&#39;</span><span class="s2"> for DOT file, </span><span class="se">\&#39;</span><span class="s2">bin</span><span class="se">\&#39;</span><span class="s2"> for binary file&quot;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--no-header&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;store_true&#39;</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s1">&#39;use this option if the input file has no header&#39;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-m&#39;</span><span class="p">,</span> <span class="s1">&#39;--m-reach&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;m value for m-reach&#39;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-t&#39;</span><span class="p">,</span> <span class="s2">&quot;--type&quot;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;pos&#39;</span><span class="p">,</span> <span class="s1">&#39;neg&#39;</span><span class="p">,</span> <span class="s1">&#39;all&#39;</span><span class="p">],</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;kp algorithm to be executed. Choices: {pos, neg, all} Default is </span><span class="se">\&quot;</span><span class="s2">all</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--largest-component&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;store_true&#39;</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Use this option to perform Kp search only on the largest component of a graph. If two components of the same size exist, this will not work. Recommended for very fragmented network with only one large component&#39;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-v&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;count&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;verbosity level. -vvv is the highest level&quot;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-d&#39;</span><span class="p">,</span> <span class="s2">&quot;--directory&quot;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Directory that will contain results (default is the current working directory). If the directory does not exist, we will create one&quot;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--report-format&#39;</span><span class="p">,</span> <span class="s1">&#39;-r&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;txt&quot;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;txt&quot;</span><span class="p">,</span> <span class="s2">&quot;csv&quot;</span><span class="p">,</span> <span class="s2">&quot;xlsx&quot;</span><span class="p">,</span> <span class="s2">&quot;tsv&quot;</span><span class="p">],</span>
                            <span class="nb">type</span><span class="o">=</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Specify a different report format according to your tastes. </span><span class="se">\&quot;</span><span class="s2">txt</span><span class="se">\&quot;</span><span class="s2"> and </span><span class="se">\&quot;</span><span class="s2">tsv</span><span class="se">\&quot;</span><span class="s2"> are tab delimited format. Available formats:{txt, tsv, csv, xlsx}&quot;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--plot-format&#39;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;svg&quot;</span><span class="p">,</span> <span class="s2">&quot;pdf&quot;</span><span class="p">,</span> <span class="s2">&quot;png&quot;</span><span class="p">],</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;pdf&quot;</span><span class="p">,</span>
                            <span class="nb">type</span><span class="o">=</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span> <span class="n">metavar</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;define the format of your plot. Choices are {svg, pdf, png}. Default is </span><span class="se">\&quot;</span><span class="s2">pdf</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--plot-dim&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Comma-separated format of your plot (default is 800,800 for graph &lt;= 150 nodes and 1600,1600 for larger graphs&quot;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--save-binary&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Save a binary file (ending with .graph) in the output directory containing your igraph object&quot;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--no-plot&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Do not output plots (recommended for graphs above 1k nodes)&quot;</span><span class="p">)</span>

        <span class="n">subparsers</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_subparsers</span><span class="p">(</span><span class="n">metavar</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">SUPPRESS</span><span class="p">)</span>

        <span class="c1"># Subparser for the nodes case</span>
        <span class="n">nodes_case_parser</span> <span class="o">=</span> <span class="n">subparsers</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s2">&quot;kp-info&quot;</span><span class="p">,</span>
                                                  <span class="n">usage</span><span class="o">=</span><span class="s1">&#39;pyntacle.py keyplayer kp-info [-h] [-f] [-v] [-d] [-m] [-a] [--save-binary] [--plot-format] [--plot-dim] [--no-plot] --input_file [FILE] --nodes NODES&#39;</span><span class="p">,</span>
                                                  <span class="n">add_help</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">parents</span><span class="o">=</span><span class="p">[</span><span class="n">parser</span><span class="p">],</span>
                                                  <span class="n">formatter_class</span><span class="o">=</span><span class="k">lambda</span> <span class="n">prog</span><span class="p">:</span> <span class="n">argparse</span><span class="o">.</span><span class="n">HelpFormatter</span><span class="p">(</span><span class="n">prog</span><span class="p">,</span>
                                                                                                      <span class="n">max_help_position</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
                                                                                                      <span class="n">width</span><span class="o">=</span><span class="mi">150</span><span class="p">))</span>
        <span class="n">nodes_case_parser</span><span class="o">.</span><span class="n">set_defaults</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s1">&#39;kp-info&#39;</span><span class="p">)</span>
        <span class="n">nodes_case_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--nodes&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;comma-separated list of nodes (e.g. --nodes 1,2,3,4)&#39;</span><span class="p">,</span>
                                       <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="c1"># Subparser for greedy case</span>
        <span class="n">greedy_case_parser</span> <span class="o">=</span> <span class="n">subparsers</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s2">&quot;kp-finder&quot;</span><span class="p">,</span>
                                                   <span class="n">usage</span><span class="o">=</span><span class="s1">&#39;pyntacle.py keyplayer kp-finder[-h] [-f] [-v] [-m] [-a] [--save-binary] [--plot-format] [--plot-dim] [--no-plot] --input_file [FILE] -k [K]&#39;</span><span class="p">,</span>
                                                   <span class="n">add_help</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">parents</span><span class="o">=</span><span class="p">[</span><span class="n">parser</span><span class="p">],</span>
                                                   <span class="n">formatter_class</span><span class="o">=</span><span class="k">lambda</span> <span class="n">prog</span><span class="p">:</span> <span class="n">argparse</span><span class="o">.</span><span class="n">HelpFormatter</span><span class="p">(</span><span class="n">prog</span><span class="p">,</span>
                                                                                                       <span class="n">max_help_position</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
                                                                                                       <span class="n">width</span><span class="o">=</span><span class="mi">150</span><span class="p">))</span>
        <span class="n">greedy_case_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-k&#39;</span><span class="p">,</span> <span class="s1">&#39;--k-size&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                                        <span class="n">help</span><span class="o">=</span><span class="s1">&#39;size of the set for greedy optimization (default is 2)&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="n">greedy_case_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-I&#39;</span><span class="p">,</span> <span class="s1">&#39;--implementation&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;greedy&quot;</span><span class="p">,</span>
                                        <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;brute-force&quot;</span><span class="p">,</span> <span class="s2">&quot;greedy&quot;</span><span class="p">],</span>
                                        <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Type of implementation you want to find yourt keyplayer. Choices are </span><span class="se">\&quot;</span><span class="s1">greedy</span><span class="se">\&quot;</span><span class="s1"> (default), </span><span class="se">\&quot;</span><span class="s1">brute-force</span><span class="se">\&quot;</span><span class="s1">, &#39;</span>
                                             <span class="s1">&#39;using the greedy optimization described by Borgatti and </span><span class="se">\&quot;</span><span class="s1">brute-force</span><span class="se">\&quot;</span><span class="s1"> in which the optimal solution is found&#39;</span><span class="p">)</span>

        <span class="n">greedy_case_parser</span><span class="o">.</span><span class="n">set_defaults</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s1">&#39;kp-finder&#39;</span><span class="p">)</span>

        <span class="c1"># now that we&#39;re inside a subcommand, ignore the first</span>
        <span class="c1"># TWO args, ie the command and subcommand</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">:])</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">4</span> <span class="ow">or</span> <span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;kp-finder&#39;</span><span class="p">,</span> <span class="s1">&#39;kp-info&#39;</span><span class="p">)):</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">print_help</span><span class="p">()</span>
            <span class="k">raise</span> <span class="n">Error</span><span class="p">(</span>
                <span class="s1">&#39;Usage: pyntacle.py keyplayer {kp-finder, kp-info} [arguments] (use --help for command description)&#39;</span><span class="p">)</span>

        <span class="n">kp</span> <span class="o">=</span> <span class="n">kp_command</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">kp</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Received SIGKILL from Keyboard</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="App.metrics"><a class="viewcode-back" href="../../pyntacle.pyntacle.html#pyntacle.pyntacle.App.metrics">[docs]</a>    <span class="k">def</span> <span class="nf">metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Metrics Calculations at Global and local level</span><span class="se">\n\n</span><span class="s1">Subcommands:</span><span class="se">\n</span><span class="s1">&#39;</span>
                        <span class="s1">&#39;  global</span><span class="se">\t</span><span class="s1">      provides metrics for the whole graph</span><span class="se">\n</span><span class="s1">&#39;</span>
                        <span class="s1">&#39;  local</span><span class="se">\t</span><span class="s1">      provides metrics for each node or for a suibset of nodes&#39;</span><span class="p">,</span>

            <span class="n">formatter_class</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">RawDescriptionHelpFormatter</span><span class="p">,</span>
            <span class="n">usage</span><span class="o">=</span><span class="n">Fore</span><span class="o">.</span><span class="n">RED</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">BRIGHT</span> <span class="o">+</span> <span class="s1">&#39;pyntacle.py metrics&#39;</span> <span class="o">+</span> <span class="n">Fore</span><span class="o">.</span><span class="n">GREEN</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">BRIGHT</span> <span class="o">+</span> <span class="s1">&#39; {global, local}&#39;</span> <span class="o">+</span> <span class="n">Fore</span><span class="o">.</span><span class="n">RED</span> <span class="o">+</span>
                  <span class="s1">&#39; [arguments]&#39;</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">RESET_ALL</span><span class="p">)</span>
        <span class="c1"># NOT prefixing the argument with -- means it&#39;s not optional</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-i&#39;</span><span class="p">,</span> <span class="s1">&#39;--input_file&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;input file in the form of adjacency matrix, adjacency list, DOT file (.dot), Simple interaction format (SIF)&quot;</span><span class="p">)</span>  <span class="c1"># todo description of all available formats?</span>
        <span class="c1"># These are options instead</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-f&#39;</span><span class="p">,</span> <span class="s1">&#39;--format&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                            <span class="n">choices</span><span class="o">=</span><span class="n">format_dictionary</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Input format. </span><span class="se">\&#39;</span><span class="s2">adjmat</span><span class="se">\&#39;</span><span class="s2"> for adjacency matrix, </span><span class="se">\&#39;</span><span class="s2">edgelist</span><span class="se">\&#39;</span><span class="s2"> for edge list, </span><span class="se">\&#39;</span><span class="s2">sif</span><span class="se">\&#39;</span><span class="s2"> for Simple Interaction format, </span><span class="se">\&#39;</span><span class="s2">dot</span><span class="se">\&#39;</span><span class="s2"> for DOT file, </span><span class="se">\&#39;</span><span class="s2">bin</span><span class="se">\&#39;</span><span class="s2"> for binary file&quot;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--no-header&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;store_true&#39;</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s1">&#39;use this option if the input file has no header&#39;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-d&#39;</span><span class="p">,</span> <span class="s2">&quot;--directory&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> <span class="n">metavar</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Directory that will contain results (default is the current working directory). If the directory does not exist, it will be created&quot;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--report-format&#39;</span><span class="p">,</span> <span class="s1">&#39;-r&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;txt&quot;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;txt&quot;</span><span class="p">,</span> <span class="s2">&quot;csv&quot;</span><span class="p">,</span> <span class="s2">&quot;xlsx&quot;</span><span class="p">,</span> <span class="s2">&quot;tsv&quot;</span><span class="p">],</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Specify a different report format according to your tastes. </span><span class="se">\&quot;</span><span class="s2">txt</span><span class="se">\&quot;</span><span class="s2"> and </span><span class="se">\&quot;</span><span class="s2">tsv</span><span class="se">\&quot;</span><span class="s2"> are tab delimited format. Available formats:{txt, tsv, csv, xlsx}&quot;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--plot-format&#39;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;svg&quot;</span><span class="p">,</span> <span class="s2">&quot;pdf&quot;</span><span class="p">,</span> <span class="s2">&quot;png&quot;</span><span class="p">],</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;pdf&quot;</span><span class="p">,</span>
                            <span class="nb">type</span><span class="o">=</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;define the format of </span><span class="se">\&quot;</span><span class="s2">--draw-graph</span><span class="se">\&quot;</span><span class="s2">. Choices are {svg, pdf, png}. Default is </span><span class="se">\&quot;</span><span class="s2">pdf</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--plot-dim&#39;</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Comma-separated format of your plot (default is 800,800 for graph &lt;= 150 nodes and 1600,1600 for larger graphs&quot;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--no-plot&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Do not output plots (recommended for graphs above 1k nodes)&quot;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--save-binary&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Save a binary file in the output directory containing your igraph object&quot;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--largest-component&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;store_true&#39;</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Use this option to compute metrics only on the largest component of a graph. If two components of the same size exist, this will not work. Recommended for very fragmented network with only one large component&#39;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-v&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;count&quot;</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;verbosity level. -vvv is the highest level (up to the </span><span class="se">\&quot;</span><span class="s2">info</span><span class="se">\&quot;</span><span class="s2"> field)&quot;</span><span class="p">)</span>

        <span class="n">subparsers</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_subparsers</span><span class="p">(</span><span class="n">metavar</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">SUPPRESS</span><span class="p">)</span>

        <span class="c1"># Subparser for the nodes case</span>
        <span class="n">local_subparser</span> <span class="o">=</span> <span class="n">subparsers</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s2">&quot;local&quot;</span><span class="p">,</span>
                                                <span class="n">usage</span><span class="o">=</span><span class="s1">&#39;pyntacle.py metrics local [-h] [-f] [-v] [-d] [-a] [--save-binary] [--plot-format] [--no-plot] --input_file [FILE] --nodes NODES&#39;</span><span class="p">,</span>
                                                <span class="n">add_help</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">parents</span><span class="o">=</span><span class="p">[</span><span class="n">parser</span><span class="p">],</span>
                                                <span class="n">formatter_class</span><span class="o">=</span><span class="k">lambda</span> <span class="n">prog</span><span class="p">:</span> <span class="n">argparse</span><span class="o">.</span><span class="n">HelpFormatter</span><span class="p">(</span><span class="n">prog</span><span class="p">,</span>
                                                                                                    <span class="n">max_help_position</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
                                                                                                    <span class="n">width</span><span class="o">=</span><span class="mi">150</span><span class="p">))</span>
        <span class="n">local_subparser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--nodes&quot;</span><span class="p">,</span>
                                     <span class="n">help</span><span class="o">=</span><span class="s1">&#39;A specific set of comma-separated list of nodes (e.g. --nodes 1,2,3,4) on which compute local metrics. Default is set for all nodes&#39;</span><span class="p">)</span>
        <span class="n">local_subparser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--damping-factor&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mf">0.85</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
                                     <span class="n">help</span><span class="o">=</span><span class="s2">&quot;for pagerank, specify a damping factor (default is 0.85)&quot;</span><span class="p">)</span>
        <span class="n">local_subparser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--weights&quot;</span><span class="p">,</span> <span class="s2">&quot;-w&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
                                     <span class="n">help</span><span class="o">=</span><span class="s2">&quot;for pagerank, an optional file of edge attributes with an header and relative node names of the edge on the first two columns that will be used. See documentation for examples.17esimo&quot;</span><span class="p">)</span>

        <span class="n">local_subparser</span><span class="o">.</span><span class="n">set_defaults</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s1">&#39;local&#39;</span><span class="p">)</span>

        <span class="c1"># Subparser for greedy case</span>
        <span class="n">global_subparser</span> <span class="o">=</span> <span class="n">subparsers</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s2">&quot;global&quot;</span><span class="p">,</span>
                                                 <span class="n">usage</span><span class="o">=</span><span class="s1">&#39;pyntacle.py metrics global [-h] [-f] [-v] [-d] [-a] [--save-binary] [--plot-format] [--no-plot] --input_file [FILE] -n/--no-nodes&#39;</span><span class="p">,</span>
                                                 <span class="n">add_help</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">parents</span><span class="o">=</span><span class="p">[</span><span class="n">parser</span><span class="p">],</span>
                                                 <span class="n">formatter_class</span><span class="o">=</span><span class="k">lambda</span> <span class="n">prog</span><span class="p">:</span> <span class="n">argparse</span><span class="o">.</span><span class="n">HelpFormatter</span><span class="p">(</span><span class="n">prog</span><span class="p">,</span>
                                                                                                     <span class="n">max_help_position</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
                                                                                                     <span class="n">width</span><span class="o">=</span><span class="mi">150</span><span class="p">))</span>
        <span class="n">global_subparser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-n&#39;</span><span class="p">,</span> <span class="s1">&#39;--no-nodes&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
                                      <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Remove a set of nodes and compute global metrics without these nodes&#39;</span><span class="p">)</span>

        <span class="n">global_subparser</span><span class="o">.</span><span class="n">set_defaults</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s1">&#39;global&#39;</span><span class="p">)</span>

        <span class="c1"># now that we&#39;re inside a subcommand, ignore the first</span>
        <span class="c1"># TWO args, ie the command and subcommand</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">:])</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">4</span> <span class="ow">or</span> <span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;global&#39;</span><span class="p">,</span> <span class="s1">&#39;local&#39;</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="n">Error</span><span class="p">(</span><span class="s1">&#39;usage: pyntacle.py metrics {global, local} [arguments] (use --help for command description)&#39;</span><span class="p">)</span>

        <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;Running pyntacle metrics</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">mt</span> <span class="o">=</span> <span class="n">metrics_command</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">mt</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Received SIGKILL from Keyboard</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="App.convert"><a class="viewcode-back" href="../../pyntacle.pyntacle.html#pyntacle.pyntacle.App.convert">[docs]</a>    <span class="k">def</span> <span class="nf">convert</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Convert a graph stored in a file format to another format&#39;</span><span class="p">,</span>
            <span class="n">formatter_class</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">RawDescriptionHelpFormatter</span><span class="p">,</span>
            <span class="n">usage</span><span class="o">=</span><span class="n">Fore</span><span class="o">.</span><span class="n">RED</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">BRIGHT</span> <span class="o">+</span> <span class="s1">&#39;pyntacle.py convert [arguments]&#39;</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">RESET_ALL</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-i&#39;</span><span class="p">,</span> <span class="s1">&#39;--input_file&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Input format. </span><span class="se">\&#39;</span><span class="s2">adjmat</span><span class="se">\&#39;</span><span class="s2"> for adjacency matrix, </span><span class="se">\&#39;</span><span class="s2">edgelist</span><span class="se">\&#39;</span><span class="s2"> for edge list, </span><span class="se">\&#39;</span><span class="s2">sif</span><span class="se">\&#39;</span><span class="s2"> for Simple Interaction format, </span><span class="se">\&#39;</span><span class="s2">dot</span><span class="se">\&#39;</span><span class="s2"> for DOT file, </span><span class="se">\&#39;</span><span class="s2">bin</span><span class="se">\&#39;</span><span class="s2"> for binary file&quot;</span><span class="p">)</span>
        <span class="c1"># These are options instead</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-f&#39;</span><span class="p">,</span> <span class="s1">&#39;--format&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                            <span class="n">choices</span><span class="o">=</span><span class="n">format_dictionary</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Input format. </span><span class="se">\&#39;</span><span class="s2">adjmat</span><span class="se">\&#39;</span><span class="s2"> for adjacency matrix, </span><span class="se">\&#39;</span><span class="s2">edgelist</span><span class="se">\&#39;</span><span class="s2"> for edge list, </span><span class="se">\&#39;</span><span class="s2">sif</span><span class="se">\&#39;</span><span class="s2"> for Simple Interaction format, </span><span class="se">\&#39;</span><span class="s2">dot</span><span class="se">\&#39;</span><span class="s2"> for DOT file, </span><span class="se">\&#39;</span><span class="s2">bin</span><span class="se">\&#39;</span><span class="s2"> for binary file&quot;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--no-header&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;store_true&#39;</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s1">&#39;use this option if the input file has no header&#39;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--no-output-header&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;store_true&#39;</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s1">&#39;use this option if you do not want an header in the output file&#39;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-d&#39;</span><span class="p">,</span> <span class="s2">&quot;--directory&quot;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Directory that will contain results (default is the current working directory). If the directory does not exist, we will create one&quot;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--output-file&quot;</span><span class="p">,</span> <span class="s2">&quot;-o&quot;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;basename of the output file. If not specified, is the basename of the input file&quot;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-u&quot;</span><span class="p">,</span> <span class="s2">&quot;--output-format&quot;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                            <span class="n">choices</span><span class="o">=</span><span class="n">format_dictionary</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;adjmat&quot;</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Desired output format. Default is </span><span class="se">\&quot;</span><span class="s2">adjmat</span><span class="se">\&quot;</span><span class="s2"> (Adjacency Matrix)&quot;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--output-separator&quot;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Optional custom separator to output stuff. Default is the same separator that you used in the input file&quot;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-v&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;count&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;verbosity level. -vvv is the highest level&quot;</span><span class="p">)</span>

        <span class="c1"># NOT prefixing the argument with -- means it&#39;s not optional</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">:])</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Error</span><span class="p">(</span><span class="s1">&#39;usage: pyntacle.py convert [arguments] (use --help for command description)&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">format</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">format_dictionary</span><span class="p">[</span><span class="n">args</span><span class="o">.</span><span class="n">format</span><span class="p">]</span> <span class="o">==</span> <span class="n">format_dictionary</span><span class="p">[</span><span class="n">args</span><span class="o">.</span><span class="n">output_format</span><span class="p">]:</span>
                <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;The output format specified is the same as the input format. Quitting.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;Running pyntacle convert</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">cv</span> <span class="o">=</span> <span class="n">convert_command</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">cv</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Received SIGKILL from Keyboard</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="App.generate"><a class="viewcode-back" href="../../pyntacle.pyntacle.html#pyntacle.pyntacle.App.generate">[docs]</a>    <span class="k">def</span> <span class="nf">generate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Generate graphs based on specific topologies using the igraph Generator&#39;</span><span class="p">,</span>
            <span class="n">formatter_class</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">RawDescriptionHelpFormatter</span><span class="p">,</span>
            <span class="n">usage</span><span class="o">=</span><span class="n">Fore</span><span class="o">.</span><span class="n">RED</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">BRIGHT</span> <span class="o">+</span> <span class="s1">&#39;pyntacle.py generate [arguments]&#39;</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">RESET_ALL</span><span class="p">)</span>

        <span class="c1"># NOT prefixing the argument with -- means it&#39;s not optional</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-d&#39;</span><span class="p">,</span> <span class="s2">&quot;--directory&quot;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Directory that will contain results (default is the current working directory). If the directory does not exist, we will create one&quot;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--output-file&quot;</span><span class="p">,</span> <span class="s2">&quot;-o&quot;</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;base name of the output file. If not specified, a significant name  with a random code will be generated&quot;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-u&quot;</span><span class="p">,</span> <span class="s2">&quot;--output-format&quot;</span><span class="p">,</span>
                            <span class="n">choices</span><span class="o">=</span><span class="n">format_dictionary</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span>
                            <span class="n">default</span><span class="o">=</span><span class="s1">&#39;adjmat&#39;</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Desired output format. Default is </span><span class="se">\&#39;</span><span class="s1">adjmat</span><span class="se">\&#39;</span><span class="s1"> (Adjacency Matrix&#39;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--output-separator&quot;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Optional custom separator for output files. Default is </span><span class="se">\&quot;\\</span><span class="s2">t</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--no-output-header&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Requires that your ouput file does not have an header. By default, an header is generated&#39;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--plot-format&#39;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;svg&quot;</span><span class="p">,</span> <span class="s2">&quot;pdf&quot;</span><span class="p">,</span> <span class="s2">&quot;png&quot;</span><span class="p">],</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;pdf&quot;</span><span class="p">,</span>
                            <span class="nb">type</span><span class="o">=</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;define the format of </span><span class="se">\&quot;</span><span class="s2">--draw-graph</span><span class="se">\&quot;</span><span class="s2">. Choices are {svg, pdf, png}. Default is </span><span class="se">\&quot;</span><span class="s2">pdf</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--plot-dim&#39;</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Comma-separated format of your plot (default is 800,800 for graph &lt;= 150 nodes and 1600,1600 for larger graphs&quot;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--no-plot&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Do not output plots (recommended for graphs above 1k nodes)&quot;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-v&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;count&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;verbosity level. -vvv is the highest level&quot;</span><span class="p">)</span>

        <span class="n">subparsers</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_subparsers</span><span class="p">(</span><span class="n">metavar</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">SUPPRESS</span><span class="p">)</span>
        <span class="c1"># Subparser for the nodes case</span>

        <span class="n">random_subparser</span> <span class="o">=</span> <span class="n">subparsers</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s2">&quot;random&quot;</span><span class="p">,</span>
                                                 <span class="n">usage</span><span class="o">=</span><span class="s1">&#39;pyntacle.py generate random [-h] [-v] [-o] [-d] [-n INT] [-p FLOAT] [--e INT] [--no-plot]&#39;</span><span class="p">,</span>
                                                 <span class="n">add_help</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">parents</span><span class="o">=</span><span class="p">[</span><span class="n">parser</span><span class="p">],</span>
                                                 <span class="n">formatter_class</span><span class="o">=</span><span class="k">lambda</span> <span class="n">prog</span><span class="p">:</span> <span class="n">argparse</span><span class="o">.</span><span class="n">HelpFormatter</span><span class="p">(</span><span class="n">prog</span><span class="p">,</span>
                                                                                                     <span class="n">max_help_position</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
                                                                                                     <span class="n">width</span><span class="o">=</span><span class="mi">150</span><span class="p">))</span>
        <span class="n">random_subparser</span><span class="o">.</span><span class="n">set_defaults</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s1">&#39;random&#39;</span><span class="p">)</span>

        <span class="n">random_subparser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-n&quot;</span><span class="p">,</span> <span class="s2">&quot;--nodes&quot;</span><span class="p">,</span>
                                      <span class="n">help</span><span class="o">=</span><span class="s2">&quot;number of nodes of the output graph. If not specified, will be a number between 30 and 300 (chosen randomly)&quot;</span><span class="p">)</span>

        <span class="n">random_subparser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-p&quot;</span><span class="p">,</span> <span class="s2">&quot;--probability&quot;</span><span class="p">,</span>
                                      <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Wiring probability of connecting each node pair. Must be a float between 0 and 1. Default is 0.5. Excludes --edges&quot;</span><span class="p">)</span>

        <span class="n">random_subparser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-e&quot;</span><span class="p">,</span> <span class="s2">&quot;--edges&quot;</span><span class="p">,</span>
                                      <span class="n">help</span><span class="o">=</span><span class="s2">&quot;The number of random edges that the random graph will have. Is excluded if -p is present&quot;</span><span class="p">)</span>

        <span class="n">scalefree_subparser</span> <span class="o">=</span> <span class="n">subparsers</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s2">&quot;scale-free&quot;</span><span class="p">,</span>
                                                    <span class="n">usage</span><span class="o">=</span><span class="s1">&#39;pyntacle.py generate scale-free[-h] [-v] [-o] [-d] [-n INT] [-m INT] [--no-plot]&#39;</span><span class="p">,</span>
                                                    <span class="n">add_help</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">parents</span><span class="o">=</span><span class="p">[</span><span class="n">parser</span><span class="p">],</span>
                                                    <span class="n">formatter_class</span><span class="o">=</span><span class="k">lambda</span> <span class="n">prog</span><span class="p">:</span> <span class="n">argparse</span><span class="o">.</span><span class="n">HelpFormatter</span><span class="p">(</span><span class="n">prog</span><span class="p">,</span>
                                                                                                        <span class="n">max_help_position</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
                                                                                                        <span class="n">width</span><span class="o">=</span><span class="mi">150</span><span class="p">))</span>
        <span class="n">scalefree_subparser</span><span class="o">.</span><span class="n">set_defaults</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s1">&#39;scale-free&#39;</span><span class="p">)</span>

        <span class="n">scalefree_subparser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-n&quot;</span><span class="p">,</span> <span class="s2">&quot;--nodes&quot;</span><span class="p">,</span>
                                         <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Number of nodes of the output graph. If not specified, will be a number between 100 and 1000 (chosen randomly)&quot;</span><span class="p">)</span>

        <span class="n">scalefree_subparser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-m&quot;</span><span class="p">,</span> <span class="s2">&quot;--outgoing-edges&quot;</span><span class="p">,</span>
                                         <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Number of outgoing edges for each node in the scale-free graph. Must be a positive integer. If not specified, it will be chosen randomly between 10 and 100&quot;</span><span class="p">)</span>

        <span class="n">tree_subparser</span> <span class="o">=</span> <span class="n">subparsers</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s2">&quot;tree&quot;</span><span class="p">,</span>
                                               <span class="n">usage</span><span class="o">=</span><span class="s1">&#39;pyntacle.py generate scale-free[-h] [-v] [-o] [-d] [-n INT] [-c INT] [--no-plot]&#39;</span><span class="p">,</span>
                                               <span class="n">add_help</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">parents</span><span class="o">=</span><span class="p">[</span><span class="n">parser</span><span class="p">],</span>
                                               <span class="n">formatter_class</span><span class="o">=</span><span class="k">lambda</span> <span class="n">prog</span><span class="p">:</span> <span class="n">argparse</span><span class="o">.</span><span class="n">HelpFormatter</span><span class="p">(</span><span class="n">prog</span><span class="p">,</span>
                                                                                                   <span class="n">max_help_position</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
                                                                                                   <span class="n">width</span><span class="o">=</span><span class="mi">150</span><span class="p">))</span>
        <span class="n">tree_subparser</span><span class="o">.</span><span class="n">set_defaults</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s1">&#39;tree&#39;</span><span class="p">)</span>

        <span class="n">tree_subparser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-n&quot;</span><span class="p">,</span> <span class="s2">&quot;--nodes&quot;</span><span class="p">,</span>
                                    <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Number of nodes of the output graph. If not specified, will be a number between 100 and 1000 (chosen randomly)&quot;</span><span class="p">)</span>
        <span class="n">tree_subparser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-c&quot;</span><span class="p">,</span> <span class="s2">&quot;--children&quot;</span><span class="p">,</span>
                                    <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Number of Children per node branch. If not specified, will be a number between 2 and 10&quot;</span><span class="p">)</span>

        <span class="n">smallworld_subparser</span> <span class="o">=</span> <span class="n">subparsers</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s2">&quot;small-world&quot;</span><span class="p">,</span>
                                                     <span class="n">usage</span><span class="o">=</span><span class="s1">&#39;pyntacle.py generate scale-free[-h] [-v] [-o] [-d] [-l INT] [-s INT] [-n INT] [-p FLOAT] [--no-plot]&#39;</span><span class="p">,</span>
                                                     <span class="n">add_help</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">parents</span><span class="o">=</span><span class="p">[</span><span class="n">parser</span><span class="p">],</span>
                                                     <span class="n">formatter_class</span><span class="o">=</span><span class="k">lambda</span> <span class="n">prog</span><span class="p">:</span> <span class="n">argparse</span><span class="o">.</span><span class="n">HelpFormatter</span><span class="p">(</span><span class="n">prog</span><span class="p">,</span>
                                                                                                         <span class="n">max_help_position</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
                                                                                                         <span class="n">width</span><span class="o">=</span><span class="mi">150</span><span class="p">))</span>
        <span class="n">smallworld_subparser</span><span class="o">.</span><span class="n">set_defaults</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s1">&#39;small-world&#39;</span><span class="p">)</span>

        <span class="n">smallworld_subparser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-l&quot;</span><span class="p">,</span> <span class="s2">&quot;--lattice&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                                          <span class="n">help</span><span class="o">=</span><span class="s2">&quot;The lattice Dimensions. Defaulty is 2. It is highliy recommeneded not use small values,as lattices with great dimensions cannot be handeld by a normal Desktop&quot;</span><span class="p">)</span>

        <span class="n">smallworld_subparser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-s&quot;</span><span class="p">,</span> <span class="s2">&quot;--lattice-size&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
                                          <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Dimension of the lattice among all dimension. Default is a number between 2 and 5. It is highly recommended to keep this number low&quot;</span><span class="p">)</span>

        <span class="n">smallworld_subparser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-n&quot;</span><span class="p">,</span> <span class="s2">&quot;--nei&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
                                          <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Number of steps in which two vertices will be connected. Default is choosen randomly between 2 and 5&quot;</span><span class="p">)</span>

        <span class="n">smallworld_subparser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-p&quot;</span><span class="p">,</span> <span class="s2">&quot;--probability&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
                                          <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Rewiring Probability. Default is 0.5&quot;</span><span class="p">)</span>

        <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">:])</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">4</span> <span class="ow">or</span> <span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;random&#39;</span><span class="p">,</span> <span class="s1">&#39;scale-free&#39;</span><span class="p">,</span> <span class="s1">&#39;tree&#39;</span><span class="p">,</span> <span class="s1">&#39;small-world&#39;</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="n">Error</span><span class="p">(</span>
                <span class="s1">&#39;usage: pyntacle.py generate {random, scale-free, tree, small-world} [arguments] (use --help for command description)&#39;</span><span class="p">)</span>

        <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;Running pyntacle generate</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">gen</span> <span class="o">=</span> <span class="n">generate_command</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">gen</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Received SIGKILL from Keyboard</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="App.communities"><a class="viewcode-back" href="../../pyntacle.pyntacle.html#pyntacle.pyntacle.App.communities">[docs]</a>    <span class="k">def</span> <span class="nf">communities</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Divide your graph into modules using one of the provided algorithms for module detection and outputs a series of subgraphs</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span>
            <span class="n">formatter_class</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">RawDescriptionHelpFormatter</span><span class="p">,</span>
            <span class="n">usage</span><span class="o">=</span><span class="n">Fore</span><span class="o">.</span><span class="n">RED</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">BRIGHT</span> <span class="o">+</span> <span class="s1">&#39;pyntacle.py communities&#39;</span> <span class="o">+</span> <span class="n">Fore</span><span class="o">.</span><span class="n">GREEN</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">BRIGHT</span> <span class="o">+</span> <span class="s1">&#39; {fastgreedy, &#39;</span>
                                                                                                   <span class="s1">&#39;infomap, leading-eigenvector, community-walktrap} &#39;</span> <span class="o">+</span> <span class="n">Fore</span><span class="o">.</span><span class="n">RED</span> <span class="o">+</span> <span class="s1">&#39;[arguments]&#39;</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">RESET_ALL</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-i&#39;</span><span class="p">,</span> <span class="s1">&#39;--input_file&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;input file in the form of adjacency matrix, adjacency list, DOT file (.dot), Simple interaction format (SIF)&quot;</span><span class="p">)</span>
        <span class="c1"># These are options instead</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-f&#39;</span><span class="p">,</span> <span class="s1">&#39;--format&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                            <span class="n">choices</span><span class="o">=</span><span class="n">format_dictionary</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Input format. </span><span class="se">\&#39;</span><span class="s2">adjmat</span><span class="se">\&#39;</span><span class="s2"> for adjacency matrix, </span><span class="se">\&#39;</span><span class="s2">edgelist</span><span class="se">\&#39;</span><span class="s2"> for edge list, </span><span class="se">\&#39;</span><span class="s2">sif</span><span class="se">\&#39;</span><span class="s2"> for Simple Interaction format, </span><span class="se">\&#39;</span><span class="s2">dot</span><span class="se">\&#39;</span><span class="s2"> for DOT file, </span><span class="se">\&#39;</span><span class="s2">bin</span><span class="se">\&#39;</span><span class="s2"> for binary file&quot;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--min-nodes&quot;</span><span class="p">,</span> <span class="s2">&quot;-m&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;minimum size of modules (graph below thresold will be discarded&quot;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--max-nodes&quot;</span><span class="p">,</span> <span class="s2">&quot;-M&quot;</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;maximum size of modules (in terms of nodes) (graph below thresold will be discarded&quot;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--min-components&quot;</span><span class="p">,</span> <span class="s2">&quot;-c&quot;</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;mimimum number of components to consider a module acceptable&quot;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--max-components&quot;</span><span class="p">,</span> <span class="s2">&quot;-C&quot;</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;minimum number of components to consider a module acceptable&quot;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--no-header&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;store_true&#39;</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s1">&#39;use this option if the input file has no header&#39;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--no-output-header&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Requires that your ouput file does not have an header. By default, an header is generated&#39;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-d&#39;</span><span class="p">,</span> <span class="s2">&quot;--directory&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> <span class="n">metavar</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Directory that will contain results (default is the current working directory). If the directory does not exists, it will be created&quot;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--output-file&quot;</span><span class="p">,</span> <span class="s2">&quot;-o&quot;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;basename of the output file and name of the output graph. If not specified, a standard name will be generated&quot;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-u&quot;</span><span class="p">,</span> <span class="s2">&quot;--output-format&quot;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                            <span class="n">choices</span><span class="o">=</span><span class="n">format_dictionary</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;adjmat&quot;</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Desired output format. Default is </span><span class="se">\&quot;</span><span class="s2">adjmat</span><span class="se">\&quot;</span><span class="s2"> (Adjacency _Matrix)&quot;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--output-separator&quot;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Optional custom separator for output files. Default is the same separator that you used in the #1 input file #1&quot;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--no-plot&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Do not output plots (recommended for graphs above 1k nodes)&quot;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--plot-format&#39;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;svg&quot;</span><span class="p">,</span> <span class="s2">&quot;pdf&quot;</span><span class="p">,</span> <span class="s2">&quot;png&quot;</span><span class="p">],</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;pdf&quot;</span><span class="p">,</span>
                            <span class="nb">type</span><span class="o">=</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;define the format of </span><span class="se">\&quot;</span><span class="s2">--draw-graph</span><span class="se">\&quot;</span><span class="s2">. Choices are {svg, pdf, png}. Default is </span><span class="se">\&quot;</span><span class="s2">pdf</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--plot-dim&#39;</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Comma-separated format of your plot (default is 800,800 for graph &lt;= 150 nodes and 1600,1600 for larger graphs&quot;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--save-binary&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Save a binary file in the output directory containing your igraph object with module attributes. See documentation for more help.&quot;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--largest-component&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;store_true&#39;</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Use this option to perform community finding only on the largest component of a graph. If two components of the same size exist, this will not work. Recommended for very fragmented network with only one large component&#39;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-v&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;count&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;verbosity level. -vvv is the highest level&quot;</span><span class="p">)</span>

        <span class="n">subparsers</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_subparsers</span><span class="p">(</span><span class="n">metavar</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">SUPPRESS</span><span class="p">)</span>

        <span class="n">fastgreedy_subparser</span> <span class="o">=</span> <span class="n">subparsers</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s2">&quot;fastgreedy&quot;</span><span class="p">,</span>
                                                     <span class="n">usage</span><span class="o">=</span><span class="s1">&#39;pyntacle.py communities fastgreedy [-h] [-v] [-o] [-d] [-dr] [-m] [-M] [-c] [-C] [--weights] [--clusters] [--no-plot]&#39;</span><span class="p">,</span>
                                                     <span class="n">add_help</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">parents</span><span class="o">=</span><span class="p">[</span><span class="n">parser</span><span class="p">],</span>
                                                     <span class="n">formatter_class</span><span class="o">=</span><span class="k">lambda</span> <span class="n">prog</span><span class="p">:</span> <span class="n">argparse</span><span class="o">.</span><span class="n">HelpFormatter</span><span class="p">(</span><span class="n">prog</span><span class="p">,</span>
                                                                                                         <span class="n">max_help_position</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
                                                                                                         <span class="n">width</span><span class="o">=</span><span class="mi">150</span><span class="p">))</span>

        <span class="n">fastgreedy_subparser</span><span class="o">.</span><span class="n">set_defaults</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s1">&#39;fastgreedy&#39;</span><span class="p">)</span>

        <span class="n">fastgreedy_subparser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--weights&quot;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                          <span class="n">help</span><span class="o">=</span><span class="s2">&quot;a file containing edge attributes, either a tabular way or a cytoscape edge attribute file. See documentation for more help on this&quot;</span><span class="p">)</span>
        <span class="n">fastgreedy_subparser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--clusters&quot;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                          <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Specify the number of modules that will be outputted by the module decomposition algorithm. If not specified, a maximized number of modules will be generated&quot;</span><span class="p">)</span>

        <span class="n">fastgreedy_subparser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--weights-format&quot;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;standard&quot;</span><span class="p">,</span> <span class="s2">&quot;cytoscape&quot;</span><span class="p">],</span> <span class="n">metavar</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                          <span class="n">default</span><span class="o">=</span><span class="s2">&quot;standard&quot;</span><span class="p">,</span>
                                          <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Specify the format of the input weight attributes file. Choices are </span><span class="se">\&quot;</span><span class="s2">standard</span><span class="se">\&quot;</span><span class="s2"> for standard edge attributes file (a dataframe) or </span><span class="se">\&quot;</span><span class="s2">cytoscape</span><span class="se">\&quot;</span><span class="s2"> for Cytoscape edge attribute file. Default is </span><span class="se">\&quot;</span><span class="s2">default</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">fastgreedy_subparser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--weights-name&quot;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="s2">&quot;cytoscape&quot;</span><span class="p">],</span> <span class="n">metavar</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                          <span class="n">help</span><span class="o">=</span><span class="s2">&quot;specify the name of the column attribute that will be used to divide module. If not specified, the first column after the edges in the weights file will be taken&quot;</span><span class="p">)</span>

        <span class="n">infomap_subparser</span> <span class="o">=</span> <span class="n">subparsers</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s2">&quot;infomap&quot;</span><span class="p">,</span>
                                                  <span class="n">usage</span><span class="o">=</span><span class="s1">&#39;pyntacle.py communities infomap [-h] [-v] [-o] [-d] [-dr] [-m] [-M] [-c] [-C] [--no-plot]&#39;</span><span class="p">,</span>
                                                  <span class="n">add_help</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">parents</span><span class="o">=</span><span class="p">[</span><span class="n">parser</span><span class="p">],</span>
                                                  <span class="n">formatter_class</span><span class="o">=</span><span class="k">lambda</span> <span class="n">prog</span><span class="p">:</span> <span class="n">argparse</span><span class="o">.</span><span class="n">HelpFormatter</span><span class="p">(</span><span class="n">prog</span><span class="p">,</span>
                                                                                                      <span class="n">max_help_position</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
                                                                                                      <span class="n">width</span><span class="o">=</span><span class="mi">150</span><span class="p">))</span>

        <span class="n">infomap_subparser</span><span class="o">.</span><span class="n">set_defaults</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s1">&#39;infomap&#39;</span><span class="p">)</span>

        <span class="n">leading_eigenvector_subparser</span> <span class="o">=</span> <span class="n">subparsers</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s2">&quot;leading-eigenvector&quot;</span><span class="p">,</span>
                                                              <span class="n">usage</span><span class="o">=</span><span class="s1">&#39;pyntacle.py communities leading-eigenvector [-h] [-v] [-o] [-d] [-dr] [-m] [-M] [-c] [-C] [--no-plot]&#39;</span><span class="p">,</span>
                                                              <span class="n">add_help</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">parents</span><span class="o">=</span><span class="p">[</span><span class="n">parser</span><span class="p">],</span>
                                                              <span class="n">formatter_class</span><span class="o">=</span><span class="k">lambda</span> <span class="n">prog</span><span class="p">:</span> <span class="n">argparse</span><span class="o">.</span><span class="n">HelpFormatter</span><span class="p">(</span><span class="n">prog</span><span class="p">,</span>
                                                                                                                  <span class="n">max_help_position</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
                                                                                                                  <span class="n">width</span><span class="o">=</span><span class="mi">150</span><span class="p">))</span>

        <span class="n">leading_eigenvector_subparser</span><span class="o">.</span><span class="n">set_defaults</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s1">&#39;leading-eigenvector&#39;</span><span class="p">)</span>

        <span class="n">community_walktrap_subparser</span> <span class="o">=</span> <span class="n">subparsers</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s2">&quot;community_walktrap&quot;</span><span class="p">,</span>
                                                             <span class="n">usage</span><span class="o">=</span><span class="s1">&#39;pyntacle.py communities community-walktrap [-h] [-v] [-o] [-d] [-dr] [-m] [-M] [-c] [-C] [--no-plot]&#39;</span><span class="p">,</span>
                                                             <span class="n">add_help</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">parents</span><span class="o">=</span><span class="p">[</span><span class="n">parser</span><span class="p">],</span>
                                                             <span class="n">formatter_class</span><span class="o">=</span><span class="k">lambda</span> <span class="n">prog</span><span class="p">:</span> <span class="n">argparse</span><span class="o">.</span><span class="n">HelpFormatter</span><span class="p">(</span><span class="n">prog</span><span class="p">,</span>
                                                                                                                 <span class="n">max_help_position</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
                                                                                                                 <span class="n">width</span><span class="o">=</span><span class="mi">150</span><span class="p">))</span>

        <span class="n">community_walktrap_subparser</span><span class="o">.</span><span class="n">set_defaults</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s1">&#39;community-walktrap&#39;</span><span class="p">)</span>

        <span class="n">community_walktrap_subparser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--weights&quot;</span><span class="p">,</span>
                                                  <span class="n">help</span><span class="o">=</span><span class="s2">&quot;a file containing edge attributes, either a tabular way or a cytoscape edge attribute file. See documentation for more help on this&quot;</span><span class="p">)</span>
        <span class="n">community_walktrap_subparser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--clusters&quot;</span><span class="p">,</span>
                                                  <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Specify the number of modules that will be oupoutted by the module decomposition algorithm. If not specified, a maximized number of modules will be generated&quot;</span><span class="p">)</span>

        <span class="n">community_walktrap_subparser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--steps&quot;</span><span class="p">,</span>
                                                  <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Specify the length of random walks that will be used by the algorithm  to find modules. Default is 3.&quot;</span><span class="p">)</span>

        <span class="n">community_walktrap_subparser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--weights-format&quot;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;standard&quot;</span><span class="p">,</span> <span class="s2">&quot;cytoscape&quot;</span><span class="p">],</span> <span class="n">metavar</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                                  <span class="n">default</span><span class="o">=</span><span class="s2">&quot;standard&quot;</span><span class="p">,</span>
                                                  <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Specify the format of the input weight attributes file. Choices are </span><span class="se">\&quot;</span><span class="s2">standard</span><span class="se">\&quot;</span><span class="s2"> for standard edge attributes file (a dataframe) or </span><span class="se">\&quot;</span><span class="s2">cytoscape</span><span class="se">\&quot;</span><span class="s2"> for Cytoscape edge attribute file. Default is </span><span class="se">\&quot;</span><span class="s2">default</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">community_walktrap_subparser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--weights-name&quot;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="s2">&quot;cytoscape&quot;</span><span class="p">],</span> <span class="n">metavar</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                                  <span class="n">help</span><span class="o">=</span><span class="s2">&quot;specify the name of the column attribute that will be used to divide module. If not specified, the first column after the edges in the weights file will be taken&quot;</span><span class="p">)</span>

        <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">:])</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">4</span> <span class="ow">or</span> <span class="p">(</span>
                    <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;fastgreedy&#39;</span><span class="p">,</span> <span class="s1">&#39;infomap&#39;</span><span class="p">,</span> <span class="s1">&#39;leading-eigenvector&#39;</span><span class="p">,</span> <span class="s1">&#39;community-walktrap&#39;</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="n">Error</span><span class="p">(</span>
                <span class="s1">&#39;usage: pyntacle.py communities {fastgreedy, infomap, leading-eigenvector, community-walktrap} [arguments] (use --help for command description)&#39;</span><span class="p">)</span>

        <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;Running pyntacle communities</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="n">comm</span> <span class="o">=</span> <span class="n">communities_command</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">comm</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Received SIGKILL from Keyboard</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="App.set"><a class="viewcode-back" href="../../pyntacle.pyntacle.html#pyntacle.pyntacle.App.set">[docs]</a>    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="s1">&#39;perform one of the 3 set operations: union, intersection, difference of two graphs on two input graphs</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span>
            <span class="n">formatter_class</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">RawDescriptionHelpFormatter</span><span class="p">,</span>
            <span class="n">usage</span><span class="o">=</span><span class="n">Fore</span><span class="o">.</span><span class="n">RED</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">BRIGHT</span> <span class="o">+</span> <span class="s1">&#39;pyntacle.py set &#39;</span> <span class="o">+</span> <span class="n">Fore</span><span class="o">.</span><span class="n">GREEN</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">BRIGHT</span> <span class="o">+</span> <span class="s1">&#39;{union, intersection,&#39;</span>
                                                                                            <span class="s1">&#39; difference}&#39;</span> <span class="o">+</span> <span class="n">Fore</span><span class="o">.</span><span class="n">RED</span> <span class="o">+</span> <span class="s1">&#39; [arguments]&#39;</span> <span class="o">+</span> <span class="n">Style</span><span class="o">.</span><span class="n">RESET_ALL</span><span class="p">)</span>
        <span class="c1"># NOT prefixing the argument with -- means it&#39;s not optional</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-1&#39;</span><span class="p">,</span> <span class="s1">&#39;--input-file-1&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;first input graph in the form of adjacency matrix, adjacency list, DOT file (.dot), Simple interaction format (SIF) or binary file (.graph)&quot;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-2&#39;</span><span class="p">,</span> <span class="s1">&#39;--input-file-2&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;second input graph in the form of adjacency matrix, adjacency list, DOT file (.dot), Simple interaction format (SIF) or binary file (.graph)&quot;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-f&#39;</span><span class="p">,</span> <span class="s1">&#39;--format&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                            <span class="n">choices</span><span class="o">=</span><span class="n">format_dictionary</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Input format of the input graphs. Allowed values are &#39;adjmat&#39; for adjacency matrix, &#39;edgelist&#39; for edge list, sif for Simple Interaction format, </span><span class="se">\&#39;</span><span class="s2">dot</span><span class="se">\&#39;</span><span class="s2"> for DOT file, </span><span class="se">\&#39;</span><span class="s2">bin</span><span class="se">\&#39;</span><span class="s2"> for boinary file&quot;</span>
                                 <span class="s2">&quot;The two files must have the same format. If not, use pyntacle Convert to convert your files to the same format&quot;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--no-header&quot;</span><span class="p">,</span> <span class="s2">&quot;-n&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Specify if the input file Does not contain an header. If one of the two input files has an header, be sure to remove or adding it using pyntacle Convert&quot;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-d&#39;</span><span class="p">,</span> <span class="s2">&quot;--directory&quot;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Directory that will contain results (default is the current working directory). If the directory does not exist, we will create one&quot;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-v&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;count&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;verbosity level. -vvv is the highest level&quot;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--plot-format&#39;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;svg&quot;</span><span class="p">,</span> <span class="s2">&quot;pdf&quot;</span><span class="p">,</span> <span class="s2">&quot;png&quot;</span><span class="p">],</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;pdf&quot;</span><span class="p">,</span>
                            <span class="nb">type</span><span class="o">=</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;define the format of </span><span class="se">\&quot;</span><span class="s2">--draw-graph</span><span class="se">\&quot;</span><span class="s2">. Choices are {svg, pdf, png}. Default is </span><span class="se">\&quot;</span><span class="s2">pdf</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--plot-dim&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Comma-separated format of your plot (default is 800,800 for graph &lt;= 150 nodes and 1600,1600 for larger graphs&quot;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--no-plot&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Do not output plots (recommended for graphs above 1k nodes)&quot;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-u&quot;</span><span class="p">,</span> <span class="s2">&quot;--output-format&quot;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                            <span class="n">choices</span><span class="o">=</span><span class="n">format_dictionary</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;adjmat&quot;</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Desired output format. Default is </span><span class="se">\&quot;</span><span class="s2">adjmat</span><span class="se">\&quot;</span><span class="s2"> (Adjacency _Matrix)&quot;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--output-file&quot;</span><span class="p">,</span> <span class="s2">&quot;-o&quot;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;basename of the output file and name of the output graph. If not specified, a standard name will be generated&quot;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--no-output-header&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Requires that your ouput file does not have an header. By default, an header is generated&#39;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--output-separator&quot;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Optional custom separator for output files. Default is the same separator that you used in the #1 input file #1&quot;</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--largest-component&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;store_true&#39;</span><span class="p">,</span>
                            <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Use this option to perform a set operation only on the largest component of a graph. If two components of the same size exist, this will not work. Recommended for very fragmented network with only one large component&#39;</span><span class="p">)</span>



        <span class="n">subparsers</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_subparsers</span><span class="p">(</span><span class="n">metavar</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">SUPPRESS</span><span class="p">)</span>

        <span class="n">unite_subparser</span> <span class="o">=</span> <span class="n">subparsers</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s2">&quot;union&quot;</span><span class="p">,</span>
                                                <span class="n">usage</span><span class="o">=</span><span class="s1">&#39;pyntacle.py set union [-1] [-2] [-h] [-v] [-o] [-d] [--output-format STR] [--output-separator] [--no-output-header] [--no-plot]&#39;</span><span class="p">,</span>
                                                <span class="n">add_help</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">parents</span><span class="o">=</span><span class="p">[</span><span class="n">parser</span><span class="p">],</span>
                                                <span class="n">formatter_class</span><span class="o">=</span><span class="k">lambda</span> <span class="n">prog</span><span class="p">:</span> <span class="n">argparse</span><span class="o">.</span><span class="n">HelpFormatter</span><span class="p">(</span><span class="n">prog</span><span class="p">,</span>
                                                                                                    <span class="n">max_help_position</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
                                                                                                    <span class="n">width</span><span class="o">=</span><span class="mi">150</span><span class="p">))</span>
        <span class="n">unite_subparser</span><span class="o">.</span><span class="n">set_defaults</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s1">&#39;union&#39;</span><span class="p">)</span>

        <span class="n">intersection_subparser</span> <span class="o">=</span> <span class="n">subparsers</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s2">&quot;intersection&quot;</span><span class="p">,</span>
                                                       <span class="n">usage</span><span class="o">=</span><span class="s1">&#39;pyntacle.py set union [-1] [-2] [-h] [-v] [-o] [-d] [--output-format STR] [--output-separator] [--no-output-header] [--no-plot]&#39;</span><span class="p">,</span>
                                                       <span class="n">add_help</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">parents</span><span class="o">=</span><span class="p">[</span><span class="n">parser</span><span class="p">],</span>
                                                       <span class="n">formatter_class</span><span class="o">=</span><span class="k">lambda</span> <span class="n">prog</span><span class="p">:</span> <span class="n">argparse</span><span class="o">.</span><span class="n">HelpFormatter</span><span class="p">(</span><span class="n">prog</span><span class="p">,</span>
                                                                                                           <span class="n">max_help_position</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
                                                                                                           <span class="n">width</span><span class="o">=</span><span class="mi">150</span><span class="p">))</span>
        <span class="n">intersection_subparser</span><span class="o">.</span><span class="n">set_defaults</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s1">&#39;intersection&#39;</span><span class="p">)</span>

        <span class="n">difference_subparser</span> <span class="o">=</span> <span class="n">subparsers</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s2">&quot;difference&quot;</span><span class="p">,</span>
                                                     <span class="n">usage</span><span class="o">=</span><span class="s1">&#39;pyntacle.py set union [-1] [-2] [-h] [-v] [-o] [-d] [--output-format STR] [--output-separator] [--no-output-header] [--no-plot]&#39;</span><span class="p">,</span>
                                                     <span class="n">add_help</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">parents</span><span class="o">=</span><span class="p">[</span><span class="n">parser</span><span class="p">],</span>
                                                     <span class="n">formatter_class</span><span class="o">=</span><span class="k">lambda</span> <span class="n">prog</span><span class="p">:</span> <span class="n">argparse</span><span class="o">.</span><span class="n">HelpFormatter</span><span class="p">(</span><span class="n">prog</span><span class="p">,</span>
                                                                                                         <span class="n">max_help_position</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
                                                                                                         <span class="n">width</span><span class="o">=</span><span class="mi">150</span><span class="p">))</span>
        <span class="n">difference_subparser</span><span class="o">.</span><span class="n">set_defaults</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s1">&#39;difference&#39;</span><span class="p">)</span>

        <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">:])</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">5</span> <span class="ow">or</span> <span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;union&#39;</span><span class="p">,</span> <span class="s1">&#39;intersection&#39;</span><span class="p">,</span> <span class="s1">&#39;difference&#39;</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="n">Error</span><span class="p">(</span>
                <span class="s1">&#39;usage: pyntacle.py set {union, intersection, difference} [arguments] (use --help for command description)&#39;</span><span class="p">)</span>

        <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;Running pyntacle set</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="nb">set</span> <span class="o">=</span> <span class="n">set_command</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">set</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Received SIGKILL from Keyboard</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span></div></div>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">App</span><span class="p">()</span>
</pre></div>

           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Author.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>